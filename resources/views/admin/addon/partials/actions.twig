<div class="card card-container">

    {% if addon.path or addon.required %}
        {% if addon.path and (addon.type == 'module' or addon.type == 'extension') %}
            {% if addon.installed %}
                <a
                        href="{{ url_route('anomaly.module.addons::addon.uninstall', {'id': addon.id, 'type': addon.type}) }}"
                        data-icon="warning"
                        data-toggle="prompt"
                        class="btn btn-danger"
                        data-match="{{ addon.name }}"
                        data-title="{{ trans('anomaly.module.addons::confirm.uninstall_title') }}"
                        data-message="{{ trans('anomaly.module.addons::confirm.uninstall_message') }}"
                >
                    {{ icon('times-circle') }} {{ trans('anomaly.module.addons::button.uninstall') }}
                </a>

                {% if addon.enabled %}
                    <a
                            href="{{ url_route('anomaly.module.addons::addon.disable', {'id': addon.id, 'type': addon.type}) }}"
                            data-icon="warning"
                            data-toggle="confirm"
                            class="btn btn-warning"
                            data-title="{{ trans('anomaly.module.addons::confirm.disable_title') }}"
                            data-message="{{ trans('anomaly.module.addons::confirm.disable_message') }}"
                    >
                        {{ icon('fa fa-toggle-off') }} {{ trans('anomaly.module.addons::button.disable') }}
                    </a>
                {% else %}
                    <a
                            href="{{ url_route('anomaly.module.addons::addon.enable', {'id': addon.id, 'type': addon.type}) }}"
                            class="btn btn-success"
                    >
                        {{ icon('fa fa-toggle-on') }} {{ trans('anomaly.module.addons::button.enable') }}
                    </a>
                {% endif %}
            {% else %}
                <a
                        href="{{ url_route('anomaly.module.addons::addon.options', {'id': addon.id, 'type': addon.type}) }}"
                        class="btn btn-success"
                        data-toggle="modal"
                        data-target="#modal"
                >
                    {{ icon('fa fa-check-circle') }} {{ trans('anomaly.module.addons::button.install') }}
                </a>

                <a
                        href="{{ url_route('anomaly.module.addons::addon.remove', {'id': addon.id, 'type': addon.type, 'repository': repository}) }}"
                        data-message="{{ trans('anomaly.module.addons::message.removing', {'addon': addon.name}) }}"
                        data-toggle="composer"
                        class="btn btn-danger"
                >
                    {{ icon('times-circle') }} {{ trans('anomaly.module.addons::button.remove') }}
                </a>
            {% endif %}
        {% else %}
            <a
                    href="{{ url_route('anomaly.module.addons::addon.remove', {'id': addon.id, 'type': addon.type, 'repository': repository}) }}"
                    data-message="{{ trans('anomaly.module.addons::message.removing', {'addon': addon.name}) }}"
                    data-toggle="composer"
                    class="btn btn-danger {{ not addon.required ? 'disabled' }}"
            >
                {{ icon('times-circle') }} {{ trans('anomaly.module.addons::button.remove') }}
            </a>
        {% endif %}

        {% if addon.outdated %}
            <a
                    href="{{ url_route('anomaly.module.addons::addon.update', {'id': addon.id, 'type': addon.type, 'repository': repository}) }}"
                    data-message="{{ trans('anomaly.module.addons::message.updating', {'addon': addon.name}) }}"
                    data-toggle="composer"
                    class="btn btn-info"
            >
                {{ icon('refresh') }} {{ trans('anomaly.module.addons::button.update') }}
            </a>
        {% endif %}

    {% else %}
        <a
                href="{{ url_route('anomaly.module.addons::addon.download', {'id': addon.id, 'type': addon.type, 'repository': repository}) }}"
                data-message="{{ trans('anomaly.module.addons::message.downloading', {'addon': addon.name}) }}"
                data-toggle="composer"
                class="btn btn-primary"
        >
            {{ icon('download') }} {{ trans('anomaly.module.addons::button.download') }}
        </a>
    {% endif %}

</div>
